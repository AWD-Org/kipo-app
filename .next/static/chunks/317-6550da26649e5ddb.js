"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[317],{575:function(a,e,r){r.d(e,{z:function(){return d}});var t=r(57437),s=r(2265),i=r(54949),n=r(96061),o=r(22169);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((a,e)=>{let{className:r,variant:s,size:n,asChild:d=!1,...c}=a,u=d?i.Slot:"button";return(0,t.jsx)(u,{className:(0,o.cn)(l({variant:s,size:n,className:r})),ref:e,...c})});d.displayName="Button"},22169:function(a,e,r){r.d(e,{SB:function(){return o},cn:function(){return i},xG:function(){return n}});var t=r(57042),s=r(74769);function i(){for(var a=arguments.length,e=Array(a),r=0;r<a;r++)e[r]=arguments[r];return(0,s.m6)((0,t.W)(e))}function n(a){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MXN";return new Intl.NumberFormat("es-MX",{style:"currency",currency:e}).format(a)}function o(a,e){return e<=0?0:Math.min(Math.max(a/e*100,0),100)}},72358:function(a,e,r){r.r(e),r.d(e,{ReduxProvider:function(){return G},default:function(){return M},store:function(){return P}});var t=r(57437),s=r(79686),i=r(93046);r(2265);var n=r(91211);let o={items:[],isLoading:!1,error:null,filter:{startDate:null,endDate:null,types:[],categories:[],searchTerm:""},stats:{totalIncome:0,totalExpenses:0,balance:0}},l=a=>{let e=a.filter(a=>"ingreso"===a.type).reduce((a,e)=>a+e.amount,0),r=a.filter(a=>"gasto"===a.type).reduce((a,e)=>a+e.amount,0);return{totalIncome:e,totalExpenses:r,balance:e-r}},d=(0,s.oM)({name:"transactions",initialState:o,reducers:{setDateFilter:(a,e)=>{a.filter.startDate=e.payload.startDate,a.filter.endDate=e.payload.endDate},setTypeFilter:(a,e)=>{a.filter.types=e.payload},setCategoryFilter:(a,e)=>{a.filter.categories=e.payload},setSearchTerm:(a,e)=>{a.filter.searchTerm=e.payload},resetFilters:a=>{a.filter=o.filter}},extraReducers:a=>{a.addCase(n.mC.pending,a=>{a.isLoading=!0,a.error=null}).addCase(n.mC.fulfilled,(a,e)=>{a.isLoading=!1,a.items=e.payload,a.stats=l(e.payload)}).addCase(n.mC.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al cargar las transacciones"}),a.addCase(n.dT.pending,a=>{a.isLoading=!0,a.error=null}).addCase(n.dT.fulfilled,(a,e)=>{a.isLoading=!1,a.items.push(e.payload),a.stats=l(a.items)}).addCase(n.dT.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al a\xf1adir la transacci\xf3n"}),a.addCase(n.Ld.pending,a=>{a.isLoading=!0,a.error=null}).addCase(n.Ld.fulfilled,(a,e)=>{a.isLoading=!1;let r=a.items.findIndex(a=>a.id===e.payload.id);-1!==r&&(a.items[r]=e.payload),a.stats=l(a.items)}).addCase(n.Ld.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al actualizar la transacci\xf3n"}),a.addCase(n.Ks.pending,a=>{a.isLoading=!0,a.error=null}).addCase(n.Ks.fulfilled,(a,e)=>{a.isLoading=!1,a.items=a.items.filter(a=>a.id!==e.payload),a.stats=l(a.items)}).addCase(n.Ks.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al eliminar la transacci\xf3n"})}}),{setDateFilter:c,setTypeFilter:u,setCategoryFilter:g,setSearchTerm:m,resetFilters:f}=d.actions;var p=d.reducer,y=r(2554);let h={items:[],isLoading:!1,error:null,filter:{isActive:!0,categories:[],searchTerm:""},stats:{totalGoals:0,totalTargetAmount:0,totalCurrentAmount:0,completionRate:0}},C=a=>{let e=a.length,r=a.reduce((a,e)=>a+e.targetAmount,0),t=a.reduce((a,e)=>a+e.currentAmount,0),s=a.filter(a=>a.isCompleted).length;return{totalGoals:e,totalTargetAmount:r,totalCurrentAmount:t,completionRate:e>0?s/e*100:0}},L=(0,s.oM)({name:"goals",initialState:h,reducers:{setActiveFilter:(a,e)=>{a.filter.isActive=e.payload},setCategoryFilter:(a,e)=>{a.filter.categories=e.payload},setSearchTerm:(a,e)=>{a.filter.searchTerm=e.payload},resetFilters:a=>{a.filter=h.filter}},extraReducers:a=>{a.addCase(y.gY.pending,a=>{a.isLoading=!0,a.error=null}).addCase(y.gY.fulfilled,(a,e)=>{a.isLoading=!1,a.items=e.payload,a.stats=C(e.payload)}).addCase(y.gY.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al cargar las metas"}),a.addCase(y.jF.pending,a=>{a.isLoading=!0,a.error=null}).addCase(y.jF.fulfilled,(a,e)=>{a.isLoading=!1,a.items.push(e.payload),a.stats=C(a.items)}).addCase(y.jF.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al a\xf1adir la meta"}),a.addCase(y.LB.pending,a=>{a.isLoading=!0,a.error=null}).addCase(y.LB.fulfilled,(a,e)=>{a.isLoading=!1;let r=a.items.findIndex(a=>a.id===e.payload.id);-1!==r&&(a.items[r]=e.payload),a.stats=C(a.items)}).addCase(y.LB.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al actualizar la meta"}),a.addCase(y.s6.pending,a=>{a.isLoading=!0,a.error=null}).addCase(y.s6.fulfilled,(a,e)=>{a.isLoading=!1,a.items=a.items.filter(a=>a.id!==e.payload),a.stats=C(a.items)}).addCase(y.s6.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al eliminar la meta"}),a.addCase(y.RA.pending,a=>{a.isLoading=!0,a.error=null}).addCase(y.RA.fulfilled,(a,e)=>{a.isLoading=!1;let r=a.items.findIndex(a=>a.id===e.payload.id);-1!==r&&(a.items[r]=e.payload),a.stats=C(a.items)}).addCase(y.RA.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al actualizar el progreso de la meta"})}}),{setActiveFilter:E,setCategoryFilter:j,setSearchTerm:w,resetFilters:T}=L.actions;var b=L.reducer;let v=(0,s.hg)("alerts/fetchAlerts",async(a,e)=>{let{rejectWithValue:r}=e;try{let e=await fetch("/api/alerts?userId=".concat(a));if(!e.ok){let a=await e.json();return r(a.message||"Error al obtener alertas")}return(await e.json()).data}catch(a){return r(a.message||"Error al obtener alertas")}}),x=(0,s.hg)("alerts/markAsRead",async(a,e)=>{let{rejectWithValue:r}=e;try{let e=await fetch("/api/alerts/".concat(a,"/read"),{method:"PATCH"});if(!e.ok){let a=await e.json();return r(a.message||"Error al marcar la alerta como le\xedda")}return await e.json(),a}catch(a){return r(a.message||"Error al marcar la alerta como le\xedda")}}),k=(0,s.hg)("alerts/markAllAsRead",async(a,e)=>{let{rejectWithValue:r}=e;try{let e=await fetch("/api/alerts/read-all?userId=".concat(a),{method:"PATCH"});if(!e.ok){let a=await e.json();return r(a.message||"Error al marcar todas las alertas como le\xeddas")}return!0}catch(a){return r(a.message||"Error al marcar todas las alertas como le\xeddas")}}),A=(0,s.hg)("alerts/deleteAlert",async(a,e)=>{let{rejectWithValue:r}=e;try{let e=await fetch("/api/alerts/".concat(a),{method:"DELETE"});if(!e.ok){let a=await e.json();return r(a.message||"Error al eliminar la alerta")}return a}catch(a){return r(a.message||"Error al eliminar la alerta")}}),F={items:[],isLoading:!1,error:null,filter:{types:[],isRead:null,searchTerm:""}},R=(0,s.oM)({name:"alerts",initialState:F,reducers:{setTypeFilter:(a,e)=>{a.filter.types=e.payload},setReadFilter:(a,e)=>{a.filter.isRead=e.payload},setSearchTerm:(a,e)=>{a.filter.searchTerm=e.payload},resetFilters:a=>{a.filter=F.filter}},extraReducers:a=>{a.addCase(v.pending,a=>{a.isLoading=!0,a.error=null}).addCase(v.fulfilled,(a,e)=>{a.isLoading=!1,a.items=e.payload}).addCase(v.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al cargar las alertas"}),a.addCase(x.pending,a=>{a.isLoading=!0,a.error=null}).addCase(x.fulfilled,(a,e)=>{a.isLoading=!1;let r=a.items.findIndex(a=>a.id===e.payload);-1!==r&&(a.items[r].isRead=!0)}).addCase(x.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al marcar la alerta como le\xedda"}),a.addCase(k.pending,a=>{a.isLoading=!0,a.error=null}).addCase(k.fulfilled,a=>{a.isLoading=!1,a.items=a.items.map(a=>({...a,isRead:!0}))}).addCase(k.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al marcar todas las alertas como le\xeddas"}),a.addCase(A.pending,a=>{a.isLoading=!0,a.error=null}).addCase(A.fulfilled,(a,e)=>{a.isLoading=!1,a.items=a.items.filter(a=>a.id!==e.payload)}).addCase(A.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al eliminar la alerta"})}}),{setTypeFilter:S,setReadFilter:z,setSearchTerm:N,resetFilters:D}=R.actions;var I=R.reducer;let P=(0,s.xC)({reducer:{transactions:p,goals:b,alerts:I}});function G(a){let{children:e}=a;return(0,t.jsx)(i.zt,{store:P,children:e})}var M=P},2554:function(a,e,r){r.d(e,{LB:function(){return n},RA:function(){return l},gY:function(){return s},jF:function(){return i},s6:function(){return o}});var t=r(79686);let s=(0,t.hg)("goals/fetchGoals",async(a,e)=>{let{rejectWithValue:r}=e;try{let e=await fetch("/api/goals?userId=".concat(a));if(!e.ok){let a=await e.json();return r(a.message||"Error al obtener metas")}return(await e.json()).data}catch(a){return r(a.message||"Error al obtener metas")}}),i=(0,t.hg)("goals/addGoal",async(a,e)=>{let{rejectWithValue:r}=e;try{let e=await fetch("/api/goals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok){let a=await e.json();return r(a.message||"Error al a\xf1adir meta")}return(await e.json()).data}catch(a){return r(a.message||"Error al a\xf1adir meta")}}),n=(0,t.hg)("goals/updateGoal",async(a,e)=>{let{rejectWithValue:r}=e;try{let e=await fetch("/api/goals/".concat(a.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok){let a=await e.json();return r(a.message||"Error al actualizar meta")}return(await e.json()).data}catch(a){return r(a.message||"Error al actualizar meta")}}),o=(0,t.hg)("goals/deleteGoal",async(a,e)=>{let{rejectWithValue:r}=e;try{let e=await fetch("/api/goals/".concat(a),{method:"DELETE"});if(!e.ok){let a=await e.json();return r(a.message||"Error al eliminar meta")}return a}catch(a){return r(a.message||"Error al eliminar meta")}}),l=(0,t.hg)("goals/updateGoalProgress",async(a,e)=>{let{id:r,amount:t}=a,{rejectWithValue:s}=e;try{let a=await fetch("/api/goals/".concat(r,"/progress"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t})});if(!a.ok){let e=await a.json();return s(e.message||"Error al actualizar el progreso")}return(await a.json()).data}catch(a){return s(a.message||"Error al actualizar el progreso")}})},91211:function(a,e,r){r.d(e,{Ks:function(){return o},Ld:function(){return n},dT:function(){return i},mC:function(){return s}});var t=r(79686);let s=(0,t.hg)("transactions/fetchTransactions",async(a,e)=>{let{rejectWithValue:r}=e;try{let e=await fetch("/api/transactions?userId=".concat(a));if(!e.ok){let a=await e.json();return r(a.message||"Error al obtener transacciones")}return(await e.json()).data}catch(a){return r(a.message||"Error al obtener transacciones")}}),i=(0,t.hg)("transactions/addTransaction",async(a,e)=>{let{rejectWithValue:r}=e;try{let e=await fetch("/api/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok){let a=await e.json();return r(a.message||"Error al a\xf1adir transacci\xf3n")}return(await e.json()).data}catch(a){return r(a.message||"Error al a\xf1adir transacci\xf3n")}}),n=(0,t.hg)("transactions/updateTransaction",async(a,e)=>{let{rejectWithValue:r}=e;try{let e=await fetch("/api/transactions/".concat(a.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok){let a=await e.json();return r(a.message||"Error al actualizar transacci\xf3n")}return(await e.json()).data}catch(a){return r(a.message||"Error al actualizar transacci\xf3n")}}),o=(0,t.hg)("transactions/deleteTransaction",async(a,e)=>{let{rejectWithValue:r}=e;try{let e=await fetch("/api/transactions/".concat(a),{method:"DELETE"});if(!e.ok){let a=await e.json();return r(a.message||"Error al eliminar transacci\xf3n")}return a}catch(a){return r(a.message||"Error al eliminar transacci\xf3n")}})}}]);