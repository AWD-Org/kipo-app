"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[317],{575:function(e,r,a){a.d(r,{z:function(){return d}});var t=a(57437),n=a(2265),i=a(54949),s=a(96061),o=a(22169);let l=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,r)=>{let{className:a,variant:n,size:s,asChild:d=!1,...c}=e,u=d?i.Slot:"button";return(0,t.jsx)(u,{className:(0,o.cn)(l({variant:n,size:s,className:a})),ref:r,...c})});d.displayName="Button"},22169:function(e,r,a){a.d(r,{SB:function(){return o},cn:function(){return i},xG:function(){return s}});var t=a(57042),n=a(74769);function i(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,n.m6)((0,t.W)(r))}function s(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MXN";return new Intl.NumberFormat("es-MX",{style:"currency",currency:r}).format(e)}function o(e,r){return r<=0?0:Math.min(Math.max(e/r*100,0),100)}},72358:function(e,r,a){a.r(r),a.d(r,{ReduxProvider:function(){return M},default:function(){return O},store:function(){return G}});var t=a(57437),n=a(79686),i=a(93046);a(2265);var s=a(91211);let o={items:[],isLoading:!1,error:null,filter:{startDate:null,endDate:null,types:[],categories:[],searchTerm:""},stats:{totalIncome:0,totalExpenses:0,balance:0}},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=Array.isArray(e)?e:[],a=r.filter(e=>"ingreso"===e.type).reduce((e,r)=>e+r.amount,0),t=r.filter(e=>"gasto"===e.type).reduce((e,r)=>e+r.amount,0);return{totalIncome:a,totalExpenses:t,balance:a-t}},d=(0,n.oM)({name:"transactions",initialState:o,reducers:{setDateFilter:(e,r)=>{e.filter.startDate=r.payload.startDate,e.filter.endDate=r.payload.endDate},setTypeFilter:(e,r)=>{e.filter.types=r.payload},setCategoryFilter:(e,r)=>{e.filter.categories=r.payload},setSearchTerm:(e,r)=>{e.filter.searchTerm=r.payload},resetFilters:e=>{e.filter=o.filter}},extraReducers:e=>{e.addCase(s.mC.pending,e=>{e.isLoading=!0,e.error=null}).addCase(s.mC.fulfilled,(e,r)=>{var a;e.isLoading=!1,e.items=null!==(a=r.payload)&&void 0!==a?a:[],e.stats=l(e.items)}).addCase(s.mC.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload||"Error al cargar las transacciones",e.items=[],e.stats=l([])}).addCase(s.dT.pending,e=>{e.isLoading=!0,e.error=null}).addCase(s.dT.fulfilled,(e,r)=>{e.isLoading=!1,e.items.push(r.payload),e.stats=l(e.items)}).addCase(s.dT.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload||"Error al a\xf1adir la transacci\xf3n"}).addCase(s.Ld.pending,e=>{e.isLoading=!0,e.error=null}).addCase(s.Ld.fulfilled,(e,r)=>{e.isLoading=!1;let a=e.items.findIndex(e=>e.id===r.payload.id);-1!==a&&(e.items[a]=r.payload),e.stats=l(e.items)}).addCase(s.Ld.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload||"Error al actualizar la transacci\xf3n"}).addCase(s.Ks.pending,e=>{e.isLoading=!0,e.error=null}).addCase(s.Ks.fulfilled,(e,r)=>{e.isLoading=!1,e.items=e.items.filter(e=>e.id!==r.payload),e.stats=l(e.items)}).addCase(s.Ks.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload||"Error al eliminar la transacci\xf3n"})}}),{setDateFilter:c,setTypeFilter:u,setCategoryFilter:g,setSearchTerm:f,resetFilters:m}=d.actions;var p=d.reducer,y=a(2554);let h={items:[],isLoading:!1,error:null,filter:{isActive:!0,categories:[],searchTerm:""},stats:{totalGoals:0,totalTargetAmount:0,totalCurrentAmount:0,completionRate:0}},C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=e.length,a=e.reduce((e,r)=>e+r.targetAmount,0),t=e.reduce((e,r)=>e+r.currentAmount,0),n=e.filter(e=>e.isCompleted).length;return{totalGoals:r,totalTargetAmount:a,totalCurrentAmount:t,completionRate:r>0?n/r*100:0}},L=e=>({id:String(e._id),userId:e.user,title:e.title,description:e.description,targetAmount:e.targetAmount,currentAmount:e.currentAmount,startDate:e.startDate,targetDate:e.targetDate,category:e.category,priority:e.priority,isCompleted:e.isCompleted,isActive:e.isActive,reminderFrequency:e.reminderFrequency,suggestedPlan:e.suggestedPlan?{monthly:e.suggestedPlan.monthly,weekly:e.suggestedPlan.weekly}:void 0}),E=(0,n.oM)({name:"goals",initialState:h,reducers:{setActiveFilter:(e,r)=>{e.filter.isActive=r.payload},setCategoryFilter:(e,r)=>{e.filter.categories=r.payload},setSearchTerm:(e,r)=>{e.filter.searchTerm=r.payload},resetFilters:e=>{e.filter=h.filter}},extraReducers:e=>{e.addCase(y.gY.pending,e=>{e.isLoading=!0,e.error=null}).addCase(y.gY.fulfilled,(e,r)=>{var a;e.isLoading=!1;let t=null!==(a=r.payload)&&void 0!==a?a:[];e.items=t.map(L),e.stats=C(e.items)}).addCase(y.gY.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload||"Error cargando metas",e.items=[],e.stats=C([])}).addCase(y.jF.pending,e=>{e.isLoading=!0,e.error=null}).addCase(y.jF.fulfilled,(e,r)=>{e.isLoading=!1,e.items.push(L(r.payload)),e.stats=C(e.items)}).addCase(y.jF.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload||"Error a\xf1adiendo meta"}).addCase(y.LB.pending,e=>{e.isLoading=!0,e.error=null}).addCase(y.LB.fulfilled,(e,r)=>{e.isLoading=!1;let a=L(r.payload),t=e.items.findIndex(e=>e.id===a.id);-1!==t&&(e.items[t]=a),e.stats=C(e.items)}).addCase(y.LB.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload||"Error actualizando meta"}).addCase(y.s6.pending,e=>{e.isLoading=!0,e.error=null}).addCase(y.s6.fulfilled,(e,r)=>{e.isLoading=!1,e.items=e.items.filter(e=>e.id!==r.payload),e.stats=C(e.items)}).addCase(y.s6.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload||"Error eliminando meta"}).addCase(y.RA.pending,e=>{e.isLoading=!0,e.error=null}).addCase(y.RA.fulfilled,(e,r)=>{e.isLoading=!1;let a=L(r.payload),t=e.items.findIndex(e=>e.id===a.id);-1!==t&&(e.items[t]=a),e.stats=C(e.items)}).addCase(y.RA.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload||"Error actualizando progreso"})}}),{setActiveFilter:j,setCategoryFilter:v,setSearchTerm:w,resetFilters:T}=E.actions;var b=E.reducer;let A=(0,n.hg)("alerts/fetchAlerts",async(e,r)=>{let{rejectWithValue:a}=r;try{let r=await fetch("/api/alerts?userId=".concat(e));if(!r.ok){let e=await r.json();return a(e.message||"Error al obtener alertas")}return(await r.json()).data}catch(e){return a(e.message||"Error al obtener alertas")}}),x=(0,n.hg)("alerts/markAsRead",async(e,r)=>{let{rejectWithValue:a}=r;try{let r=await fetch("/api/alerts/".concat(e,"/read"),{method:"PATCH"});if(!r.ok){let e=await r.json();return a(e.message||"Error al marcar la alerta como le\xedda")}return await r.json(),e}catch(e){return a(e.message||"Error al marcar la alerta como le\xedda")}}),k=(0,n.hg)("alerts/markAllAsRead",async(e,r)=>{let{rejectWithValue:a}=r;try{let r=await fetch("/api/alerts/read-all?userId=".concat(e),{method:"PATCH"});if(!r.ok){let e=await r.json();return a(e.message||"Error al marcar todas las alertas como le\xeddas")}return!0}catch(e){return a(e.message||"Error al marcar todas las alertas como le\xeddas")}}),F=(0,n.hg)("alerts/deleteAlert",async(e,r)=>{let{rejectWithValue:a}=r;try{let r=await fetch("/api/alerts/".concat(e),{method:"DELETE"});if(!r.ok){let e=await r.json();return a(e.message||"Error al eliminar la alerta")}return e}catch(e){return a(e.message||"Error al eliminar la alerta")}}),R={items:[],isLoading:!1,error:null,filter:{types:[],isRead:null,searchTerm:""}},S=(0,n.oM)({name:"alerts",initialState:R,reducers:{setTypeFilter:(e,r)=>{e.filter.types=r.payload},setReadFilter:(e,r)=>{e.filter.isRead=r.payload},setSearchTerm:(e,r)=>{e.filter.searchTerm=r.payload},resetFilters:e=>{e.filter=R.filter}},extraReducers:e=>{e.addCase(A.pending,e=>{e.isLoading=!0,e.error=null}).addCase(A.fulfilled,(e,r)=>{e.isLoading=!1,e.items=r.payload}).addCase(A.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload||"Error al cargar las alertas"}),e.addCase(x.pending,e=>{e.isLoading=!0,e.error=null}).addCase(x.fulfilled,(e,r)=>{e.isLoading=!1;let a=e.items.findIndex(e=>e.id===r.payload);-1!==a&&(e.items[a].isRead=!0)}).addCase(x.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload||"Error al marcar la alerta como le\xedda"}),e.addCase(k.pending,e=>{e.isLoading=!0,e.error=null}).addCase(k.fulfilled,e=>{e.isLoading=!1,e.items=e.items.map(e=>({...e,isRead:!0}))}).addCase(k.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload||"Error al marcar todas las alertas como le\xeddas"}),e.addCase(F.pending,e=>{e.isLoading=!0,e.error=null}).addCase(F.fulfilled,(e,r)=>{e.isLoading=!1,e.items=e.items.filter(e=>e.id!==r.payload)}).addCase(F.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload||"Error al eliminar la alerta"})}}),{setTypeFilter:D,setReadFilter:P,setSearchTerm:z,resetFilters:N}=S.actions;var I=S.reducer;let G=(0,n.xC)({reducer:{transactions:p,goals:b,alerts:I}});function M(e){let{children:r}=e;return(0,t.jsx)(i.zt,{store:G,children:r})}var O=G},2554:function(e,r,a){a.d(r,{LB:function(){return s},RA:function(){return l},gY:function(){return n},jF:function(){return i},s6:function(){return o}});var t=a(79686);let n=(0,t.hg)("goals/fetchGoals",async(e,r)=>{let{rejectWithValue:a}=r;try{let e=await fetch("/api/goals",{credentials:"include"});if(!e.ok){let r=await e.json();return a(r.error||"Error obteniendo metas")}let r=await e.json();return Array.isArray(r.data)?r.data:[]}catch(e){return console.error(e),a("Error de red")}}),i=(0,t.hg)("goals/addGoal",async(e,r)=>{let{rejectWithValue:a}=r;try{let r=await fetch("/api/goals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.json();return a(e.error||"Error a\xf1adiendo meta")}return(await r.json()).data}catch(e){return console.error(e),a("Error de red")}}),s=(0,t.hg)("goals/updateGoal",async(e,r)=>{let{rejectWithValue:a}=r;try{let r=await fetch("/api/goals/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.json();return a(e.error||"Error actualizando meta")}return(await r.json()).data}catch(e){return console.error(e),a("Error de red")}}),o=(0,t.hg)("goals/deleteGoal",async(e,r)=>{let{rejectWithValue:a}=r;try{let r=await fetch("/api/goals/".concat(e),{method:"DELETE"});if(!r.ok){let e=await r.json();return a(e.error||"Error eliminando meta")}return e}catch(e){return console.error(e),a("Error de red")}}),l=(0,t.hg)("goals/updateGoalProgress",async(e,r)=>{let{id:a,amount:t}=e,{rejectWithValue:n}=r;try{let e=await fetch("/api/goals/".concat(a,"/progress"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t})});if(!e.ok){let r=await e.json();return n(r.error||"Error actualizando progreso")}return(await e.json()).data}catch(e){return console.error(e),n("Error de red")}})},91211:function(e,r,a){a.d(r,{Ks:function(){return o},Ld:function(){return s},dT:function(){return i},mC:function(){return n}});var t=a(79686);let n=(0,t.hg)("transactions/fetchTransactions",async(e,r)=>{let{rejectWithValue:a}=r;try{let e=await fetch("/api/transactions",{credentials:"include"});if(!e.ok){let r=await e.json();return a(r.error||"Error al obtener transacciones")}let r=await e.json();return Array.isArray(r.data)?r.data:[]}catch(e){return console.error(e),a("Error de red")}}),i=(0,t.hg)("transactions/addTransaction",async(e,r)=>{let{rejectWithValue:a}=r;try{let r=await fetch("/api/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let{error:e}=await r.json();return a(null!=e?e:"Error al a\xf1adir transacci\xf3n")}let{transaction:t}=await r.json();return t}catch(e){return a(e.message||"Error al a\xf1adir transacci\xf3n")}}),s=(0,t.hg)("transactions/updateTransaction",async(e,r)=>{let{rejectWithValue:a}=r;try{let r=await fetch("/api/transactions/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let{error:e}=await r.json();return a(null!=e?e:"Error al actualizar transacci\xf3n")}let{transaction:t}=await r.json();return t}catch(e){return a(e.message||"Error al actualizar transacci\xf3n")}}),o=(0,t.hg)("transactions/deleteTransaction",async(e,r)=>{let{rejectWithValue:a}=r;try{let r=await fetch("/api/transactions/".concat(e),{method:"DELETE"});if(!r.ok){let{error:e}=await r.json();return a(null!=e?e:"Error al eliminar transacci\xf3n")}return e}catch(e){return a(e.message||"Error al eliminar transacci\xf3n")}})}}]);