(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{73067:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},86264:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(62898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},66887:function(e,r,t){Promise.resolve().then(t.bind(t,96078)),Promise.resolve().then(t.bind(t,72358))},96078:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return p}});var n=t(57437),a=t(2265),s=t(24033),l=t(82749),i=t(575),d=t(22782),c=t(15671),o=t(73067),u=t(86264);t(15355);var x=(0,t(31162).$)("fa7c494de1d4863ac83ab020f061dc4df0b3dc98"),m=t(22169);let h=["ahorro","inversi\xf3n","deuda","compra","otro"],f=["baja","media","alta"],j=[["none","Sin recordatorios"],["daily","Diario"],["weekly","Semanal"],["monthly","Mensual"]];function p(){let e=(0,s.useRouter)(),{data:r}=(0,l.useSession)(),[t,p]=(0,a.useState)({title:"",description:"",targetAmount:"",currentAmount:"",startDate:new Date().toISOString().substr(0,10),targetDate:"",category:"ahorro",priority:"media",reminderFrequency:"none"}),[g,b]=(0,a.useState)(!1),[v,y]=(0,a.useState)(""),[N,w]=(0,a.useState)(!1),C=e=>{let{name:r,value:t}=e.target;p(e=>({...e,[r]:t}))},Z=async t=>{if(t.preventDefault(),!r)return y("Debes iniciar sesi\xf3n");b(!0);let n=await x(new FormData(t.currentTarget));b(!1),n.success?e.push("/dashboard/goals"):y(n.error||"Error creando meta")},k=(0,m.SB)(parseFloat(t.currentAmount)||0,parseFloat(t.targetAmount)||1);return(0,n.jsxs)("form",{onSubmit:Z,className:"space-y-8 max-w-md mx-auto py-12",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)(i.z,{variant:"ghost",onClick:()=>e.back(),size:"sm",className:"gap-1",children:[(0,n.jsx)(o.Z,{size:16})," Volver"]}),(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Nueva meta"})]}),(0,n.jsxs)(c.Zb,{children:[(0,n.jsx)(c.Ol,{children:(0,n.jsx)(c.ll,{children:"T\xedtulo"})}),(0,n.jsx)(c.aY,{children:(0,n.jsx)(d.I,{name:"title",value:t.title,onChange:C,required:!0})})]}),(0,n.jsxs)(c.Zb,{children:[(0,n.jsx)(c.Ol,{children:(0,n.jsx)(c.ll,{children:"Descripci\xf3n"})}),(0,n.jsx)(c.aY,{children:(0,n.jsx)("textarea",{name:"description",value:t.description,onChange:C,className:"w-full rounded border p-2"})})]}),(0,n.jsxs)(c.Zb,{children:[(0,n.jsxs)(c.Ol,{children:[(0,n.jsx)(c.ll,{children:"Montos"}),(0,n.jsx)(c.SZ,{children:"Objetivo y progreso"})]}),(0,n.jsxs)(c.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:"$"}),(0,n.jsx)(d.I,{name:"targetAmount",type:"number",value:t.targetAmount,onChange:C,placeholder:"Objetivo",className:"pl-8",step:"0.01",min:"0",required:!0})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:"$"}),(0,n.jsx)(d.I,{name:"currentAmount",type:"number",value:t.currentAmount,onChange:C,placeholder:"Actual",className:"pl-8",step:"0.01",min:"0"})]}),t.targetAmount&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{children:"Progreso"}),(0,n.jsxs)("span",{children:[Math.round(k),"%"]})]}),(0,n.jsx)("div",{className:"w-full bg-secondary h-2.5 rounded",children:(0,n.jsx)("div",{className:"bg-primary h-2.5 rounded",style:{width:"".concat(k,"%")}})}),(0,n.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,n.jsx)("span",{children:(0,m.xG)(parseFloat(t.currentAmount)||0)}),(0,n.jsx)("span",{children:(0,m.xG)(parseFloat(t.targetAmount)||0)})]})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)(c.Zb,{children:[(0,n.jsx)(c.Ol,{children:(0,n.jsx)(c.ll,{children:"Inicio"})}),(0,n.jsx)(c.aY,{children:(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)(d.I,{name:"startDate",type:"date",value:t.startDate,onChange:C,required:!0})})})]}),(0,n.jsxs)(c.Zb,{children:[(0,n.jsx)(c.Ol,{children:(0,n.jsx)(c.ll,{children:"Vence"})}),(0,n.jsx)(c.aY,{children:(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)(d.I,{name:"targetDate",type:"date",value:t.targetDate,onChange:C,required:!0})})})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)(c.Zb,{children:[(0,n.jsx)(c.Ol,{children:(0,n.jsx)(c.ll,{children:"Categor\xeda"})}),(0,n.jsx)(c.aY,{children:(0,n.jsx)("select",{name:"category",value:t.category,onChange:C,className:"w-full border rounded p-2",children:h.map(e=>(0,n.jsx)("option",{value:e,children:e},e))})})]}),(0,n.jsxs)(c.Zb,{children:[(0,n.jsx)(c.Ol,{children:(0,n.jsx)(c.ll,{children:"Prioridad"})}),(0,n.jsx)(c.aY,{children:(0,n.jsx)("select",{name:"priority",value:t.priority,onChange:C,className:"w-full border rounded p-2",children:f.map(e=>(0,n.jsx)("option",{value:e,children:e},e))})})]})]}),(0,n.jsxs)(c.Zb,{children:[(0,n.jsx)(c.Ol,{children:(0,n.jsx)(c.ll,{children:"Recordatorios"})}),(0,n.jsx)(c.aY,{children:(0,n.jsx)("select",{name:"reminderFrequency",value:t.reminderFrequency,onChange:C,className:"w-full border rounded p-2",children:j.map(e=>{let[r,t]=e;return(0,n.jsx)("option",{value:r,children:t},r)})})})]}),v&&(0,n.jsx)("div",{className:"text-red-600",children:v}),N&&(0,n.jsx)("div",{className:"text-green-600",children:"Meta creada con \xe9xito"}),(0,n.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,n.jsx)(i.z,{variant:"outline",onClick:()=>e.back(),children:"Cancelar"}),(0,n.jsx)(i.z,{type:"submit",disabled:g,children:g?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{className:"animate-spin mr-2"}),"Guardando..."]}):"Guardar meta"})]})]})}},15671:function(e,r,t){"use strict";t.d(r,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return l},aY:function(){return o},eW:function(){return u},ll:function(){return d}});var n=t(57437),a=t(2265),s=t(22169);let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});l.displayName="Card";let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent";let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},22782:function(e,r,t){"use strict";t.d(r,{I:function(){return l}});var n=t(57437),a=t(2265),s=t(22169);let l=a.forwardRef((e,r)=>{let{className:t,type:a,...l}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...l})});l.displayName="Input"},31162:function(e,r,t){"use strict";Object.defineProperty(r,"$",{enumerable:!0,get:function(){return a}});let n=t(15355);function a(e){let{createServerReference:r}=t(6671);return r(e,n.callServer)}},24033:function(e,r,t){e.exports=t(15313)}},function(e){e.O(0,[14,873,866,317,971,938,744],function(){return e(e.s=66887)}),_N_E=e.O()}]);