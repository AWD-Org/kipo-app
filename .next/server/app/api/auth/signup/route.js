(()=>{var e={};e.id=654,e.ids=[654],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},23485:(e,r,t)=>{"use strict";t.r(r),t.d(r,{headerHooks:()=>g,originalPathname:()=>y,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>w});var o={};t.r(o),t.d(o,{POST:()=>c});var a=t(95419),n=t(69108),s=t(99678),i=t(78070),u=t(25459),p=t(87786),l=t.n(p);async function c(e){try{let{name:r,email:t,password:o}=await e.json();if(!r||!t||!o)return i.Z.json({error:"Todos los campos son requeridos"},{status:400});if(await (0,u.Z)(),await l().findOne({email:t}))return i.Z.json({error:"El usuario ya existe"},{status:409});return await l().create({name:r,email:t,password:o,isOnboarded:!1}),i.Z.json({message:"Usuario creado"},{status:201})}catch(e){return console.error("Signup error:",e),i.Z.json({error:"Error interno"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/signup/route",pathname:"/api/auth/signup",filename:"route",bundlePath:"app/api/auth/signup/route"},resolvedPagePath:"/Users/salomon/Documents/Projects/kipo-app/src/app/api/auth/signup/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:f,headerHooks:g,staticGenerationBailout:w}=d,y="/api/auth/signup/route";function v(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:h})}},87786:(e,r,t)=>{let o=t(11185),a=t(6521),n=new o.Schema({name:{type:String,required:[!0,"Por favor proporciona un nombre"],trim:!0},email:{type:String,required:[!0,"Por favor proporciona un email"],unique:!0,lowercase:!0,match:[/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,"Por favor proporciona un email v\xe1lido"]},password:{type:String,required:[!0,"Por favor proporciona una contrase\xf1a"],minlength:6,select:!1},monthlyIncome:{type:Number,default:0},monthlyExpenses:{type:Number,default:0},mainExpenseCategories:{type:[String],default:[]},savingsGoal:{type:Number,default:0},referralSource:{type:String,default:""},createdAt:{type:Date,default:Date.now},isOnboarded:{type:Boolean,default:!1}});n.pre("save",async function(e){this.isModified("password")||e();let r=await a.genSalt(10);this.password=await a.hash(this.password,r)}),n.methods.matchPassword=async function(e){return await a.compare(e,this.password)},e.exports=o.models.User||o.model("User",n)},25459:(e,r,t)=>{"use strict";t.d(r,{Z:()=>u,v:()=>i});var o=t(11185),a=t.n(o);let n=process.env.MONGODB_URI;if(!n)throw Error("Por favor define la variable de entorno MONGODB_URI dentro de .env.local");let s=global.mongoose;async function i(){return s.conn||(s.promise||(s.promise=a().connect(n,{useNewUrlParser:!0,useUnifiedTopology:!0}).then(e=>e)),s.conn=await s.promise),s.conn}s||(s=global.mongoose={conn:null,promise:null});let u=i}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[638,393,206],()=>t(23485));module.exports=o})();