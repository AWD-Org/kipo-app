"use strict";exports.id=141,exports.ids=[141],exports.modules={54141:(a,e,r)=>{r.r(e),r.d(e,{ReduxProvider:()=>G,default:()=>J,store:()=>O});var t=r(95344),s=r(99688),i=r(36013);r(3729);var o=r(96703);let d={items:[],isLoading:!1,error:null,filter:{startDate:null,endDate:null,types:[],categories:[],searchTerm:""},stats:{totalIncome:0,totalExpenses:0,balance:0}},l=(a=[])=>{let e=Array.isArray(a)?a:[],r=e.filter(a=>"ingreso"===a.type).reduce((a,e)=>a+e.amount,0),t=e.filter(a=>"gasto"===a.type).reduce((a,e)=>a+e.amount,0);return{totalIncome:r,totalExpenses:t,balance:r-t}},n=(0,s.oM)({name:"transactions",initialState:d,reducers:{setDateFilter:(a,e)=>{a.filter.startDate=e.payload.startDate,a.filter.endDate=e.payload.endDate},setTypeFilter:(a,e)=>{a.filter.types=e.payload},setCategoryFilter:(a,e)=>{a.filter.categories=e.payload},setSearchTerm:(a,e)=>{a.filter.searchTerm=e.payload},resetFilters:a=>{a.filter=d.filter}},extraReducers:a=>{a.addCase(o.mC.pending,a=>{a.isLoading=!0,a.error=null}).addCase(o.mC.fulfilled,(a,e)=>{a.isLoading=!1,a.items=e.payload??[],a.stats=l(a.items)}).addCase(o.mC.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al cargar las transacciones",a.items=[],a.stats=l([])}).addCase(o.dT.pending,a=>{a.isLoading=!0,a.error=null}).addCase(o.dT.fulfilled,(a,e)=>{a.isLoading=!1,a.items.push(e.payload),a.stats=l(a.items)}).addCase(o.dT.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al a\xf1adir la transacci\xf3n"}).addCase(o.Ld.pending,a=>{a.isLoading=!0,a.error=null}).addCase(o.Ld.fulfilled,(a,e)=>{a.isLoading=!1;let r=a.items.findIndex(a=>a.id===e.payload.id);-1!==r&&(a.items[r]=e.payload),a.stats=l(a.items)}).addCase(o.Ld.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al actualizar la transacci\xf3n"}).addCase(o.Ks.pending,a=>{a.isLoading=!0,a.error=null}).addCase(o.Ks.fulfilled,(a,e)=>{a.isLoading=!1,a.items=a.items.filter(a=>a.id!==e.payload),a.stats=l(a.items)}).addCase(o.Ks.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al eliminar la transacci\xf3n"})}}),{setDateFilter:c,setTypeFilter:g,setCategoryFilter:u,setSearchTerm:m,resetFilters:p}=n.actions,y=n.reducer;var f=r(4355);let h={items:[],isLoading:!1,error:null,filter:{isActive:!0,categories:[],searchTerm:""},stats:{totalGoals:0,totalTargetAmount:0,totalCurrentAmount:0,completionRate:0}},C=(a=[])=>{let e=a.length,r=a.reduce((a,e)=>a+e.targetAmount,0),t=a.reduce((a,e)=>a+e.currentAmount,0),s=a.filter(a=>a.isCompleted).length;return{totalGoals:e,totalTargetAmount:r,totalCurrentAmount:t,completionRate:e>0?s/e*100:0}},L=a=>({id:String(a._id),userId:a.user,title:a.title,description:a.description,targetAmount:a.targetAmount,currentAmount:a.currentAmount,startDate:a.startDate,targetDate:a.targetDate,category:a.category,priority:a.priority,isCompleted:a.isCompleted,isActive:a.isActive,reminderFrequency:a.reminderFrequency,suggestedPlan:a.suggestedPlan?{monthly:a.suggestedPlan.monthly,weekly:a.suggestedPlan.weekly}:void 0}),E=(0,s.oM)({name:"goals",initialState:h,reducers:{setActiveFilter:(a,e)=>{a.filter.isActive=e.payload},setCategoryFilter:(a,e)=>{a.filter.categories=e.payload},setSearchTerm:(a,e)=>{a.filter.searchTerm=e.payload},resetFilters:a=>{a.filter=h.filter}},extraReducers:a=>{a.addCase(f.gY.pending,a=>{a.isLoading=!0,a.error=null}).addCase(f.gY.fulfilled,(a,e)=>{a.isLoading=!1;let r=e.payload??[];a.items=r.map(L),a.stats=C(a.items)}).addCase(f.gY.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error cargando metas",a.items=[],a.stats=C([])}).addCase(f.jF.pending,a=>{a.isLoading=!0,a.error=null}).addCase(f.jF.fulfilled,(a,e)=>{a.isLoading=!1,a.items.push(L(e.payload)),a.stats=C(a.items)}).addCase(f.jF.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error a\xf1adiendo meta"}).addCase(f.LB.pending,a=>{a.isLoading=!0,a.error=null}).addCase(f.LB.fulfilled,(a,e)=>{a.isLoading=!1;let r=L(e.payload),t=a.items.findIndex(a=>a.id===r.id);-1!==t&&(a.items[t]=r),a.stats=C(a.items)}).addCase(f.LB.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error actualizando meta"}).addCase(f.s6.pending,a=>{a.isLoading=!0,a.error=null}).addCase(f.s6.fulfilled,(a,e)=>{a.isLoading=!1,a.items=a.items.filter(a=>a.id!==e.payload),a.stats=C(a.items)}).addCase(f.s6.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error eliminando meta"}).addCase(f.RA.pending,a=>{a.isLoading=!0,a.error=null}).addCase(f.RA.fulfilled,(a,e)=>{a.isLoading=!1;let r=L(e.payload),t=a.items.findIndex(a=>a.id===r.id);-1!==t&&(a.items[t]=r),a.stats=C(a.items)}).addCase(f.RA.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error actualizando progreso"})}}),{setActiveFilter:j,setCategoryFilter:T,setSearchTerm:w,resetFilters:A}=E.actions,F=E.reducer,k=(0,s.hg)("alerts/fetchAlerts",async(a,{rejectWithValue:e})=>{try{let r=await fetch(`/api/alerts?userId=${a}`);if(!r.ok){let a=await r.json();return e(a.message||"Error al obtener alertas")}return(await r.json()).data}catch(a){return e(a.message||"Error al obtener alertas")}}),R=(0,s.hg)("alerts/markAsRead",async(a,{rejectWithValue:e})=>{try{let r=await fetch(`/api/alerts/${a}/read`,{method:"PATCH"});if(!r.ok){let a=await r.json();return e(a.message||"Error al marcar la alerta como le\xedda")}return await r.json(),a}catch(a){return e(a.message||"Error al marcar la alerta como le\xedda")}}),S=(0,s.hg)("alerts/markAllAsRead",async(a,{rejectWithValue:e})=>{try{let r=await fetch(`/api/alerts/read-all?userId=${a}`,{method:"PATCH"});if(!r.ok){let a=await r.json();return e(a.message||"Error al marcar todas las alertas como le\xeddas")}return!0}catch(a){return e(a.message||"Error al marcar todas las alertas como le\xeddas")}}),x=(0,s.hg)("alerts/deleteAlert",async(a,{rejectWithValue:e})=>{try{let r=await fetch(`/api/alerts/${a}`,{method:"DELETE"});if(!r.ok){let a=await r.json();return e(a.message||"Error al eliminar la alerta")}return a}catch(a){return e(a.message||"Error al eliminar la alerta")}}),D={items:[],isLoading:!1,error:null,filter:{types:[],isRead:null,searchTerm:""}},P=(0,s.oM)({name:"alerts",initialState:D,reducers:{setTypeFilter:(a,e)=>{a.filter.types=e.payload},setReadFilter:(a,e)=>{a.filter.isRead=e.payload},setSearchTerm:(a,e)=>{a.filter.searchTerm=e.payload},resetFilters:a=>{a.filter=D.filter}},extraReducers:a=>{a.addCase(k.pending,a=>{a.isLoading=!0,a.error=null}).addCase(k.fulfilled,(a,e)=>{a.isLoading=!1,a.items=e.payload}).addCase(k.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al cargar las alertas"}),a.addCase(R.pending,a=>{a.isLoading=!0,a.error=null}).addCase(R.fulfilled,(a,e)=>{a.isLoading=!1;let r=a.items.findIndex(a=>a.id===e.payload);-1!==r&&(a.items[r].isRead=!0)}).addCase(R.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al marcar la alerta como le\xedda"}),a.addCase(S.pending,a=>{a.isLoading=!0,a.error=null}).addCase(S.fulfilled,a=>{a.isLoading=!1,a.items=a.items.map(a=>({...a,isRead:!0}))}).addCase(S.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al marcar todas las alertas como le\xeddas"}),a.addCase(x.pending,a=>{a.isLoading=!0,a.error=null}).addCase(x.fulfilled,(a,e)=>{a.isLoading=!1,a.items=a.items.filter(a=>a.id!==e.payload)}).addCase(x.rejected,(a,e)=>{a.isLoading=!1,a.error=e.payload||"Error al eliminar la alerta"})}}),{setTypeFilter:v,setReadFilter:b,setSearchTerm:$,resetFilters:z}=P.actions,I=P.reducer,O=(0,s.xC)({reducer:{transactions:y,goals:F,alerts:I}});function G({children:a}){return t.jsx(i.zt,{store:O,children:a})}let J=O},4355:(a,e,r)=>{r.d(e,{LB:()=>o,RA:()=>l,gY:()=>s,jF:()=>i,s6:()=>d});var t=r(99688);let s=(0,t.hg)("goals/fetchGoals",async(a,{rejectWithValue:e})=>{try{let a=await fetch("/api/goals",{credentials:"include"});if(!a.ok){let r=await a.json();return e(r.error||"Error obteniendo metas")}let r=await a.json();return Array.isArray(r.data)?r.data:[]}catch(a){return console.error(a),e("Error de red")}}),i=(0,t.hg)("goals/addGoal",async(a,{rejectWithValue:e})=>{try{let r=await fetch("/api/goals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){let a=await r.json();return e(a.error||"Error a\xf1adiendo meta")}return(await r.json()).data}catch(a){return console.error(a),e("Error de red")}}),o=(0,t.hg)("goals/updateGoal",async(a,{rejectWithValue:e})=>{try{let r=await fetch(`/api/goals/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){let a=await r.json();return e(a.error||"Error actualizando meta")}return(await r.json()).data}catch(a){return console.error(a),e("Error de red")}}),d=(0,t.hg)("goals/deleteGoal",async(a,{rejectWithValue:e})=>{try{let r=await fetch(`/api/goals/${a}`,{method:"DELETE"});if(!r.ok){let a=await r.json();return e(a.error||"Error eliminando meta")}return a}catch(a){return console.error(a),e("Error de red")}}),l=(0,t.hg)("goals/updateGoalProgress",async({id:a,amount:e},{rejectWithValue:r})=>{try{let t=await fetch(`/api/goals/${a}/progress`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e})});if(!t.ok){let a=await t.json();return r(a.error||"Error actualizando progreso")}return(await t.json()).data}catch(a){return console.error(a),r("Error de red")}})},96703:(a,e,r)=>{r.d(e,{Ks:()=>d,Ld:()=>o,dT:()=>i,mC:()=>s});var t=r(99688);let s=(0,t.hg)("transactions/fetchTransactions",async(a,{rejectWithValue:e})=>{try{let a=await fetch("/api/transactions",{credentials:"include"});if(!a.ok){let r=await a.json();return e(r.error||"Error al obtener transacciones")}let r=await a.json();return Array.isArray(r.data)?r.data:[]}catch(a){return console.error(a),e("Error de red")}}),i=(0,t.hg)("transactions/addTransaction",async(a,{rejectWithValue:e})=>{try{let r=await fetch("/api/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){let{error:a}=await r.json();return e(a??"Error al a\xf1adir transacci\xf3n")}let{transaction:t}=await r.json();return t}catch(a){return e(a.message||"Error al a\xf1adir transacci\xf3n")}}),o=(0,t.hg)("transactions/updateTransaction",async(a,{rejectWithValue:e})=>{try{let r=await fetch(`/api/transactions/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){let{error:a}=await r.json();return e(a??"Error al actualizar transacci\xf3n")}let{transaction:t}=await r.json();return t}catch(a){return e(a.message||"Error al actualizar transacci\xf3n")}}),d=(0,t.hg)("transactions/deleteTransaction",async(a,{rejectWithValue:e})=>{try{let r=await fetch(`/api/transactions/${a}`,{method:"DELETE"});if(!r.ok){let{error:a}=await r.json();return e(a??"Error al eliminar transacci\xf3n")}return a}catch(a){return e(a.message||"Error al eliminar transacci\xf3n")}})}};